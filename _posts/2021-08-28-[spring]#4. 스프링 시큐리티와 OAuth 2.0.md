---
title: "[spring]#4. 스프링 시큐리티와 OAuth 2.0"
categories: [study]
comments: true
---

# 구글 서비스 등록하기
## 인증 정보 발급받기
https://console.cloud.google.com/?hl=ko 로 이동한다. 그리고, 새 프로젝트를 생성하고 등록될 서비스의 이름을 입력한다.

![apiandservice](..\assets\img\spring\4-1consoleoauth.JPG)

만들어졌으면 프로젝트로 이동하고, API 및 서비스 창에서, 사용자 인증 정보를 만든다. 이번 포스팅에서는 OAuth 클라이언트 ID로 구현할 것이다.

![apiandservice](..\assets\img\spring\4-2makeid1.JPG)
![apiandservice](..\assets\img\spring\4-2makeid2.JPG)

어플리케이션 유형을 정해주고, 리디렉션 URI도 정해준다.
<br>
`리디렉션 URI` 란 , 
* 서비스에서 파라미터로 인증 정보를 주었을 때 인증이 성곡하면 구글에서 리다이렉트할 URL이다.
* 사용자가 별도로 리다이렉트 URL을 지원하는 Controller를 만들 필요가 없다.
* AWS 서버에 배포하면 localhost 외에 추가로 주소를 추가해야 한다.

## application-oauth 등록

### application-oauth.properties
```properties
spring.security.oauth2.client.registration.google.client-id = 클라이언트 ID
spring.security.oauth2.client.registration.google.client-secret = 클라이언트 비밀번호
spring.security.oauth2.client.registration.google.scope = profile,email
```

를 src/main/resource/ 에 등록해준다. 스프링 부트에서는 properties의 이름을 application-xxx.properties로 만들면 xxx 라는 `profile` 이 생성되어 관리할 수 있다. 즉, profile = xxx 라는 식으로 호출하면 해당 프로퍼티의 설정들을 가져올 수 있다. 따라서 application.properties에
```properties
spring.profiles.include = oauth
```

를 추가해주면 설정값을 사용할 수 있다. 또, 보안상의 이유로 gitignore에 oauth 프로퍼티를 등록해준다.
