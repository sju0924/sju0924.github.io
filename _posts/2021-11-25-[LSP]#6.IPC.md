---
title: '[LSP]#6.IPC'
categories: [study]
comments: true
---

# Inter-Process Communication
> ## ğŸ’Œí”„ë¡œì„¸ìŠ¤ ê°„ ì†Œí†µí•˜ëŠ” ë§¤ì»¤ë‹ˆì¦˜

* pipes
* FIFOS
* message queue
* shared memory
* socket

ë°©ì‹ìœ¼ë¡œ ì†Œí†µí•  ìˆ˜ ìˆë‹¤.

# pipes

## íŠ¹ì§•
* ### ğŸ“£ half-duplex
* ### ë¶€ëª¨-ìì‹ í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹ í•˜ëŠ” ë§¤ì»¤ë‹ˆì¦˜

## pipe

``` c
 #include<unistd.h>
 int pipe(int fd[2]);
```

### return
* 0 if ok
* -1 if error

### example code

```c++
#include <stdio.h>
#include <sys/types.h>
#include <unistd.h>

#define	MAX_BUF	128

main()
{
	int		n, fd[2];
	pid_t	pid;
	char	buf[MAX_BUF];

    // ìì‹ í”„ë¡œì„¸ìŠ¤ ìƒì„±
	if (pipe(fd) < 0)  {
		perror("pipe");
		exit(1);
	}

	if ((pid = fork()) < 0)  {
		perror("fork");
		exit(1);
	}
	else if (pid == 0)  { //ìì‹ í”„ë¡œì„¸ìŠ¤
		close(fd[1]); // ì“°ì§€ ì•ŠëŠ” íŒŒì´í”„ë¥¼ ë‹«ìŒ
		printf("Child : Wait for parent to send data\n");
		if ((n = read(fd[0], buf, MAX_BUF)) < 0)  {
			perror("read");
			exit(1);
		}
		printf("Child : Received data from parent: ");
		fflush(stdout); // \n ì„ ì•ˆ í–ˆê¸° ë•Œë¬¸ì— fflushë¥¼ í•´ì•¼ ë³¼ ìˆ˜ ìˆìŒ
		write(STDOUT_FILENO, buf, n); //STDOUT_FILENO ìœ¼ë¡œ ì½ì€ ê²ƒì„ ì½ì€ í¬ê¸°ë§Œí¼ ì¶œë ¥í•¨.
	}
	else  { //ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤
		close(fd[0]);
		strcpy(buf, "Hello, World!\n");
		printf("Parent: Send data to child\n");
		write(fd[1], buf, strlen(buf)+1);
	}

	exit(0);
```

### IPC through pipes
* parent ê°€ fd ë‘ê°œë¥¼ ì½ê¸°ìš©, ì“°ê¸°ìš©ìœ¼ë¡œ ë§Œë“¤ì–´ ë‹¨ë°©í–¥ìœ¼ë¡œ ì“°ê³  ë³´ë‚¸ë‹¤.
* I/O function ì˜ read/write system call ë¡œ ì‘ì„±í•œë‹¤.

# Dup

## íŠ¹ì§• 